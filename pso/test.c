#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#include "common.h"
#include "policy.h"
#include "sim.h"

int_t main() {
  srand(time(NULL));

  policy_t p = {{-0.049859,-0.006992,0.542074,0.082791,-0.204079,-0.168357,-0.112731,0.382967,-0.320941,-0.246155,0.068271,0.364475,0.329952,0.243621,0.021487,-0.072325,0.341911,0.072885,0.444094,0.177077,-0.073443,0.318638,0.173164,0.424150,-0.017708,-0.313002,0.047999,-0.136397,0.094327,0.142328,0.413668,0.199598,-0.144678,0.063395,-0.117714,0.110804,0.160900,-0.087678,0.432592,-0.161130,-0.401382,0.164883,-0.175678,0.162229,0.078475,-0.060957,-0.365127,0.090437,0.125450}};
  sim_t s;
  sim_leo(&s);

  printf("[[");
  vec3_print(&s.pos);
  printf(",0]");

  for (int i = 1; i <= 200000; i += 1) {
    sim_step(&s, &p);
    if (i % 600 == 0) {
      printf(",\n[");
      vec3_print(&s.pos);
      printf(",%d]", i);
    }
  }

  printf("]");

  return 0;
}
